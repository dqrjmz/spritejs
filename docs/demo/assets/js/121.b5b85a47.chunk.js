(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{637:function(n,t,e){"use strict";e.r(t),t.default="/* globals d3 */\nconst {Scene} = spritejs;\nconst container = document.getElementById('stage');\nconst scene = new Scene({\n  container,\n  width: 1600,\n  height: 1200,\n  mode: 'stickyWidth',\n});\n\nconst layer = d3.select(scene.layer('fglayer'));\n\ndocument.querySelector('#stage canvas').style.backgroundColor = '#151718';\n\nlayer.append('label')\n  .attr('pos', [1100, 150])\n  .attr('name', 'region')\n  .attr('font', '42px Arial')\n  .attr('text', '\u4e2d\u56fd')\n  .attr('fillColor', '#fff');\n\nd3.json('https://s5.ssl.qhres.com/static/b0695e2dd30daa64.json', (err, data) => {\n  if(err) throw new Error(err);\n\n  const root = d3.hierarchy(data)\n    .sum(d => 1)\n    .sort((a, b) => b.value - a.value);\n\n  const pack = d3.pack()\n    .size([1000, 1000])\n    .padding(3);\n\n  const nodes = pack(root);\n\n  const color = d3.scaleSequential(d3.interpolateMagma)\n    .domain([-4, 4]);\n\n  layer.selectAll('label[name!=\"region\"]')\n    .data(nodes.descendants())\n    .enter()\n    .append('label')\n    .attr('translate', [300, 150])\n    .attr('anchor', 0.5)\n    .attr('pos', (d) => {\n      const x = Math.round(d.x),\n        y = Math.round(d.y);\n\n      return [x, y];\n    })\n    .attr('size', (d) => {\n      const r = Math.round(d.r);\n      return [2 * r, 2 * r];\n    })\n    .attr('bgcolor', d => color(d.depth))\n    .attr('borderRadius', (d) => {\n      return d.r;\n    })\n    .attr('font', (d) => {\n      return `${16 + Math.round(10 * Math.log2(d.value))}px Arial`;\n    })\n    .attr('lineHeight', (d) => {\n      return Math.round(2 * d.r);\n    })\n    .attr('textAlign', 'center')\n    .attr('text', (d) => {\n      if(!d.children) return d.data.name;\n      return '';\n    })\n    .on('mousemove', function (d) {\n      // console.log(d.data.name)\n      layer.selectAll('label[name=\"region\"]')\n        .attr('text', d.data.name);\n      layer.selectAll('label[name!=\"region\"]')\n        .attr('border', null);\n      this.attr('border', [3, 'red']);\n    })\n    .on('mouseleave', function (d) {\n      this.attr('border', null);\n    });\n});"}}]);