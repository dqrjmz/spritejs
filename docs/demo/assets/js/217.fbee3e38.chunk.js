(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{733:function(n,t,e){"use strict";e.r(t),t.default="(async function () {\n  const {Scene, Sprite, Label, Group, Path} = spritejs;\n  const container = document.getElementById('stage');\n  const scene = new Scene({\n    container,\n    width: 1200,\n    height: 1200,\n  });\n\n  const fglayer = scene.layer('fglayer');\n  fglayer.canvas.style.backgroundColor = '#F0DBAE';\n\n  await scene.preload([\n    'https://p5.ssl.qhimg.com/t01f47a319aebf27174.png',\n    'https://s3.ssl.qhres.com/static/a6a7509c33a290a6.json',\n  ]);\n\n  const huanhuan = new Group();\n  huanhuan.attr({\n    pos: [600, 600],\n    rotate: 30,\n  });\n  fglayer.append(huanhuan);\n\n  const robot = new Sprite('huanhuan.png');\n  robot.attr({\n    anchor: [0.5, 0],\n    size: [78, 96],\n  });\n  huanhuan.append(robot);\n\n  const outerFireD = 'M19.8173,24.1766 L5.3273,32.9936 C4.6293,33.4186 3.7183,33.1976 3.2943,32.4996 C3.1953,32.3376 3.1313,32.1596 3.1003,31.9836 L0.1953,15.2736 C-1.0387,8.1796 3.7123,1.4286 10.8073,0.1946 C17.9013,-1.0394 24.6523,3.7116 25.8853,10.8056 C26.8283,16.2296 24.2443,21.4666 19.8173,24.1766';\n\n  const outerFire = new Path();\n  outerFire.attr({\n    d: outerFireD,\n    pos: [-12, 90],\n    fillColor: 'rgb(253,88,45)',\n    zIndex: -1,\n  });\n  huanhuan.append(outerFire);\n\n  const innerFireD = 'M15.9906,13.766 L8.4096,26.718 C8.0486,27.335 7.2706,27.521 6.6726,27.133 C6.4296,26.976 6.2536,26.748 6.1536,26.491 L0.6356,12.223 C-1.1554,7.594 0.9666,2.393 5.3746,0.605 C9.7826,-1.182 14.8076,1.122 16.5976,5.752 C17.6546,8.483 17.3236,11.455 15.9906,13.766';\n\n  const innerFire = new Path();\n  innerFire.attr({\n    d: innerFireD,\n    pos: [-5, 90],\n    rotate: 15,\n    fillColor: 'rgb(254,222,9)',\n    zIndex: -1,\n  });\n  huanhuan.append(innerFire);\n\n  const keyboardBg = new Sprite();\n  keyboardBg.attr({\n    size: [380, 400],\n    pos: [750, 900],\n    bgcolor: '#E0CDA3',\n    borderRadius: 20,\n  });\n  fglayer.append(keyboardBg);\n\n  class KeyButton extends Label {\n    constructor(text) {\n      super({\n        text,\n        font: '40px \"\u5b8b\u4f53\"',\n        fillColor: '#333',\n        bgcolor: '#FFFDE6',\n        borderRadius: 15,\n        width: 80,\n        height: 80,\n        textAlign: 'center',\n        lineHeight: 80,\n      });\n    }\n  }\n\n\n  function setKey(key, x, y) {\n    const button = new KeyButton(key);\n    button.attr({\n      pos: [x, y],\n    });\n    ['keydown', 'mousedown', 'touchstart'].forEach((event) => {\n      button.addEventListener(event, (evt) => {\n        button.attr({\n          bgcolor: '#E8E6D1',\n          fillColor: '#333',\n        });\n      });\n    });\n\n    ['keyup', 'mouseup', 'touchend'].forEach((event) => {\n      button.addEventListener(event, (evt) => {\n        button.attr({\n          bgcolor: '#FFFDE6',\n          fillColor: '#333',\n        });\n      });\n    });\n    fglayer.append(button);\n    return button;\n  }\n\n  const flapping = huanhuan.animate([\n    {translate: [8.5, 10]},\n    {translate: [-8.5, -10]},\n  ], {\n    duration: 1000,\n    iterations: Infinity,\n    direction: 'alternate',\n  });\n\n  let moving = null;\n  function moveY(destY) {\n    flapping.pause();\n    const y = huanhuan.attr('y');\n    if(moving) moving.cancel(true);\n    moving = huanhuan.animate([\n      {y},\n      {y: destY},\n    ], {\n      duration: Math.abs(10 * (y - destY)),\n      fill: 'forwards',\n    });\n  }\n  function moveX(destX) {\n    flapping.pause();\n    const x = huanhuan.attr('x');\n    if(moving) moving.cancel(true);\n    moving = huanhuan.animate([\n      {x},\n      {x: destX},\n    ], {\n      duration: Math.abs(10 * (x - destX)),\n      fill: 'forwards',\n    });\n  }\n\n  function stopMove() {\n    if(moving) {\n      moving.cancel(true);\n      moving = null;\n    }\n    flapping.play();\n  }\n\n  window.scene = scene;\n\n  const buttonW = setKey('W', 900, 950);\n  const buttonA = setKey('A', 800, 1050);\n  const buttonS = setKey('S', 900, 1050);\n  const buttonD = setKey('D', 1000, 1050);\n  ['keydown', 'mousedown', 'touchstart'].forEach((event) => {\n    buttonW.addEventListener(event, moveY.bind(null, -1000));\n    buttonA.addEventListener(event, moveX.bind(null, -1000));\n    buttonS.addEventListener(event, moveY.bind(null, 3000));\n    buttonD.addEventListener(event, moveX.bind(null, 3000));\n  });\n  ['keyup', 'mouseup', 'touchend'].forEach((event) => {\n    buttonW.addEventListener(event, stopMove);\n    buttonA.addEventListener(event, stopMove);\n    buttonS.addEventListener(event, stopMove);\n    buttonD.addEventListener(event, stopMove);\n  });\n\n  document.addEventListener('keydown', (event) => {\n    [buttonW, buttonA, buttonS, buttonD].forEach((button) => {\n      if(event.key === button.text.toLowerCase()) {\n        button.dispatchEvent(event);\n      }\n    });\n  });\n\n  document.addEventListener('keyup', (event) => {\n    [buttonW, buttonA, buttonS, buttonD].forEach((button) => {\n      if(event.key === button.text.toLowerCase()) {\n        button.dispatchEvent(event);\n      }\n    });\n  });\n\n  /* eslint-disable no-console */\n  console.log('press key to move robot');\n  /* eslint-enable no-console */\n}());"}}]);