(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{613:function(e,n,t){"use strict";t.r(n),n.default="const {Scene} = spritejs;\nconst {Mesh3d, Cube, shaders} = spritejs.ext3d;\nconst container = document.getElementById('container');\nconst scene = new Scene({\n  container,\n  displayRatio: 2,\n});\nconst layer = scene.layer3d('fglayer', {\n  camera: {\n    fov: 45,\n  },\n});\n\nlayer.camera.attributes.pos = [3, 1.5, 4];\nlayer.camera.lookAt([1, 0.2, 0]);\n\nconst texture = layer.createTexture('https://p5.ssl.qhimg.com/t0110e2451e92de6193.jpg');\nconst program = layer.createProgram({\n  ...shaders.NORMAL_TEXTURE,\n  texture,\n});\nconst model = layer.loadModel('https://s5.ssl.qhres.com/static/f545f86e6da07b9d.json');\nconst mesh = new Mesh3d(program, {model});\nlayer.append(mesh);\n\nconst videoTexture = layer.createTexture({\n  generateMipmaps: false,\n  width: 1024,\n  height: 512,\n});\n\n// Create video with attributes that let it autoplay\n// Check update loop to see when video is attached to texture\nconst video = document.createElement('video');\nvideo.crossOrigin = 'anonymous';\nvideo.src = 'https://s4.ssl.qhres.com/static/a2fa8e8634dd1ccb.mp4';\n\n// Disclaimer: video autoplay is a confusing, constantly-changing browser feature.\n// The best approach is to never assume that it will work, and therefore prepare for a fallback.\n// Tested on mac: Chrome, Safari, Firefox; android: chrome\nvideo.loop = true;\nvideo.muted = true;\nvideo.play();\n\nconst videoProgram = layer.createProgram({\n  ...shaders.NORMAL_TEXTURE,\n  texture: videoTexture,\n  cullFace: null,\n});\n\nconst videoMesh = new Cube(videoProgram, {\n  width: 1.78,\n  height: 1,\n  depth: 1.78,\n});\nvideoMesh.attributes.pos = [0, 0.5, -4];\nvideoMesh.attributes.scale = 1.5;\nlayer.append(videoMesh);\n\nlayer.tick((t) => {\n  // Attach video and/or update texture when video is ready\n  if(video.readyState >= video.HAVE_ENOUGH_DATA) {\n    if(!videoTexture.image) videoTexture.image = video;\n    videoTexture.needsUpdate = true;\n  }\n\n  if(mesh) mesh.attributes.rotateY -= 0.3;\n  videoMesh.attributes.rotateY += 0.2;\n});"}}]);